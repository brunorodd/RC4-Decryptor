module initialize_array(s_array, clk);
// this will be an 256 value x 8 bit number array (holds 256 8 bit values)
output logic [7:0] s_array [0:255];
input logic clk;
// this will be an 8-bit number that is used to implement the algorithm for task 1
logic [7:0] i = 8'b0;

// for (i = 0; i < 255; i++)
	// s[i] = i

	// Task 1
	
logic increase, write_s, done;
logic [2:0] state;

logic remain = 1'b0;

parameter [2:0] idle = 3'b000;
parameter [2:0] write = 3'b001;
parameter [2:0] increment = 3'b010;
parameter [2:0] end_init = 3'b100;

assign increase = state[1];
assign write_s = state[0];
assign done = state[2];

always_ff @ (posedge done)
begin
	remain = 1'b1;
end	

always_ff @ (posedge clk)
begin
	if (write_s)
		s_array[i] = i;
end

always_ff @ (posedge clk)
begin
	case (state)
		idle: if (remain)
					state <= idle;
				else
					state <= write;
		
		write: state <= increment;
		
		increment: if (i < 256)
							state <= idle;
					  else 
							state <= end_init;
						
		end_init: state <= idle;
							
	endcase
end

always_ff @ (posedge clk)
begin
	if (increase)
		i = i + 1;
end

endmodule
